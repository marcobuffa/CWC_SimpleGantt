/* Version 1.6.3, copyright (C) 2021, Siemens AG. All Rights Reserved. */

!function(){var B;try{void 0===window.WebCC&&(window.WebCC=((B=function(){var e,C=null,b="pending",y=!1,w=-1,r={success:null,failure:null,version:null,auth:null,attributes:null,timeout:null,extensions:null},s=[],o=[],i=function(e){var n=null,t="";t=-1!==e.indexOf(">_")?(n=JSON.parse(e))[n.length-1]:e;for(var o=s.length-1;0<=o;o--)-1!==JSON.stringify(s[o].fullname).lastIndexOf(t)&&(s[o].port.onmessage=null,s[o].port=null,s[o]=null,s.splice(o,1))},m=function(e){return"undefined"!=typeof WorkerGlobalScope&&e instanceof WorkerGlobalScope||"undefined"!=typeof DedicatedWorkerGlobalScope&&e instanceof DedicatedWorkerGlobalScope},S=m(this),W=(e=this,"undefined"!=typeof SharedWorkerGlobalScope&&e instanceof SharedWorkerGlobalScope),n=null,t=new Promise(function(e){n=e}),p=W?null:S?this:window.parent,c=W?t:Promise.resolve(),a=function(e){var n=e,o=[];return n.onmessage=function(n){o.forEach(function(e){e(n)})},{addEventListener:function(e,n){"message"===e&&o.push(n)},removeEventListener:function(e,n){if("message"===e){var t=o.indexOf(n);-1!==t&&o.splice(t,1)}},detachBootMessageListener:function(){o.splice(0,1)},postMessage:function(e){n.postMessage(e)},port:n}},g=null,x=null,E={},A=[],_={},L=null,h=function(){try{var e=window.sessionStorage.getItem("swac.timeouts.enabled");return"boolean"!=typeof JSON.parse(e)||JSON.parse(e)}catch(e){return!0}}(),k=function(){h&&window.clearTimeout(w),W?p&&p.removeEventListener("message",g):window.removeEventListener("message",g)},O=function(n,e,t){var o,i,s,a="";if(W||S)try{if(importScripts(n),!e)throw new Error("Load failure");e()}catch(e){t&&t("Failed to load "+n+" library")}else a=document.createElement("script"),o=function(){a.removeAttribute("src"),document.getElementsByTagName("head")?document.getElementsByTagName("head")[0].removeChild(a):document.getElementsByTagName("body")[0].removeChild(a),a=null},i=function(){a.removeEventListener("load",i),o(),e&&e()},s=function(){a.removeEventListener("error",s),o(),t&&t("Failed to load "+n+" library")},a.setAttribute("type","text/javascript"),a.setAttribute("src",n),(e||t)&&(e&&a.addEventListener("load",i),t&&a.addEventListener("error",s)),document.getElementsByTagName("head")?document.getElementsByTagName("head")[0].appendChild(a):document.getElementsByTagName("body")[0].appendChild(a);n=""},M=function(e){return JSON.stringify({t:"boot",c:e})},N=function(){return!(!window.SWAC||"object"!=typeof SWAC||"object"!=typeof SWAC.Communication)},v=function(e,n,t,o){var i,s,a,r,c,l,u,d,f={},w=!1,m=null,p=null,g=null,h=null,v=null;if(("waiting"===b||"ok"===b)&&"string"==typeof e.data&&0<e.data.length){try{if(!((f=JSON.parse(e.data))&&f.t&&f.c))throw new Error("Incompatible message received");if("boot"!==f.t)throw new Error("Unknown message received: "+f.t)}catch(e){return}if(s=function(e){b="failed",k(),t({message:e}),W?o.postMessage(M({message:"failed"})):swacPostMessage(M({message:"failed"}),"*")},"boot"===f.t&&"pong"===f.c.message){if(void 0!==f.c.timeouts&&(L=f.c.timeouts),a=function(){C.isContainer=!1,b="ok",(x=f.c).containerVersion=x.containerVersion||"1.0.0",W?o.postMessage(M({message:"ok"})):swacPostMessage(M({message:"ok"}),"*")},c=function(){var e,n=A.length,t={};if(void 0!==C.Hub.prototype.Extensions||void 0!==window.WebCC){if(void 0!==C.Hub.prototype.Extensions&&0<Object.keys(C.Hub.prototype.Extensions).length?t=C.Hub.prototype.Extensions:void 0!==window.WebCC&&void 0!==window.WebCC.Extensions&&0<Object.keys(window.WebCC.Extensions).length&&(t=window.WebCC.Extensions),null!==g){if(Object.keys(t).length!==g+1)return void s("Invalid Extension");for(var o in t)t.hasOwnProperty(o)&&void 0!==_[o]&&(t[_[o]]=t[o],delete t[o],delete _[o])}0===n?a():(b="upgrading",e=A.pop(),"undefined"==typeof defineExtension?O(e,function(){"undefined"!=typeof defineExtension&&(defineExtension=defineExtension.bind({SWAC:C})),void 0!==window.WebCC&&void 0!==window.WebCC.Extensions&&(w=!0),c()},s):w?"$$unknownExtension$$"===e?s("Unknown Extension"):(g=Object.keys(t).length,O(e,c,s)):(m=/^\s+|\s+$/g,null==e||""===e.replace(m,"")?s("Failed to load SWAC.Config.Control.URLs library"):(i=function(){window.___swacWebccBaseLoaded___||(void 0!==window.WebCC&&void 0!==window.WebCC.Extensions?(w=!0,c()):s("Failed to load SWAC.Config.Control.URLs library"))},("undefined"!=typeof SystemJS||"function"==typeof define&&void 0!==define.amd&&"undefined"!=typeof require)&&(window.___swacWebccCheck___=function(){w=!0,delete window.___swacWebccCheck___,c()}),O(e,i,s)),m=null))}else a()},f.c.extensions)for(l in f.c.extensions)f.c.extensions.hasOwnProperty(l)&&A.unshift(f.c.extensions[l]);if(h=f.c.containerVersion||"1.0.0",v=void 0!==B?B:null,window.SWAC&&void 0!==window.SWAC)N()?((C=window.SWAC).BootInstance=v,c()):s("SWAC is a reserved variable name");else{if("1.5.0"===h)return window.console.warn("SWAC version 1.5.0 is incompatible with current version"),void s("SWAC version 1.5.0 is incompatible with current version");if(m=/^\s+|\s+$/g,void 0===f.c.url||null===f.c.url||""===f.c.url.replace(m,""))s("SWAC.Config.Container.URLs library is empty");else{i=function(){window.SWAC&&void 0!==window.SWAC||void 0!==f.c.namespace&&void 0!==window[f.c.namespace]?N()?((C=window.SWAC).BootInstance=v,c()):s("SWAC is a reserved variable name"):s("Failed to load SWAC.Config.Container.URLs library")},b="upgrading";try{p=new URL(f.c.url)}catch(e){return void s("Failed to load SWAC.Config.Container.URLs library")}"data:"===p.protocol?(u=f.c.url,d="",W||S?importScripts(u):((d=document.createElement("script")).innerHTML=window.atob(u.split(";base64,")[1]),document.getElementsByTagName("head")?(document.getElementsByTagName("head")[0].appendChild(d),document.getElementsByTagName("head")[0].removeChild(d)):(document.getElementsByTagName("body")[0].appendChild(d),document.getElementsByTagName("body")[0].removeChild(d))),u="",i()):O(f.c.url,i,s),p=null,f.c.url=""}m=null}}else if("boot"===f.t&&"ok2"===f.c.message){for(r in y=!(b="done"),k(),x)x.hasOwnProperty(r)&&(E[r]=x[r]);for(r in x.message="SWAC successfully loaded",x.auth=x.authentication,x.SWAC="object"==typeof C?C:new C,L&&(x.SWAC.Config.TimeOuts=L),delete x.authentication,delete x.url,delete x.extensions,delete x.namespace,f.c.details?W&&(o.fullname=f.c.details.path):E.details={path:["<root>"]},f.c)"message"!==r&&f.c.hasOwnProperty(r)&&(E.hasOwnProperty(r)||(E[r]=f.c[r]));delete x._internal,C.Hub.prototype.containerVersion=x.containerVersion,n(x)}else"boot"===f.t&&"peng"===f.c.message&&(k(),t({message:f.c.reason}))}},l=function(o,e,n,t,i,s,a){var r,c,l,u=function(){if(p===self){if(m(p))return p.postMessage;if("object"==typeof swacNative&&"function"==typeof swacNative.postMessage)return swacNative.postMessage;if(window.external&&"function"==typeof window.external.postMessage)return window.external.postMessage}return null}(),d=[];if(o===self&&"function"!=typeof u&&"function"!=typeof window.swacPostMessage)b="failed",E.details={path:["<root>"]},window.setTimeout(function(){t({message:"Component is not embedded into an iframe"})},0);else{if(window.SWAC&&"object"==typeof SWAC&&"object"==typeof SWAC.Container){var f=SWAC.Container.get();f&&Array.isArray(f)&&0<f.length&&(SWAC._internal.wrongMixedBoothSequence=!0,window.console.warn("Mixed component: wrong boot sequence detected")),f=null}if(W||"function"!=typeof window.swacPostMessage&&(window.swacPostMessage=S?function(e,n,t){return u(e)}:"function"==typeof u?u:function(e,n,t){return o.postMessage(e,n)}),g=function(e){v(e,n,t,o)},b="waiting",W?o.addEventListener("message",g,!1):window.addEventListener("message",g,!1),h&&(w=window.setTimeout(function(){"done"!==b&&(b="timedout",E.details={path:["<root>"]},k(),t({message:"Bootload sequence timed out"}))},e)),null!==arguments[7]&&void 0!==arguments[7])for(r=0;r<arguments[7].length;r++)"object"==typeof arguments[7][r]?(d.push(arguments[7][r].extension),_[arguments[7][r].extension]=arguments[7][r].as):d.push(arguments[7][r]);c={message:"ping",version:i,authentication:s,attributes:a,extensions:d},N()&&(c.swacBaseLoaded=!0),l=M(c),W?o.postMessage(l):swacPostMessage(l,"*")}},u=function(e,n){var t=null;e.promise.then(function(){o.shift()}).catch(function(e){i(E.name),o.shift(),-1!==JSON.stringify(E.details.path).indexOf("<"+E.name+">_")&&(E={},delete window.SWAC)}).finally(function(){0<o.length&&setTimeout(function(){d(o[0])},0)}),n.onDisconnected.subscribe(t=function(){i(n.fullname),0===s.length&&(s.first=!0),p=null,n.onDisconnected.unsubscribe(t)})},d=function(e){var i=new a(e.ports[0]);s.first||0!==s.length?l(i,r.timeout,function(){var n=new SWAC.Hub(SWAC.Hub.instance._internal.original,i),t=new SWAC.Defer,e=JSON.stringify(i.fullname);t.promise.catch(function(e){e.reasonCode&&17015===e.reasonCode&&setTimeout(function(){throw new SWAC.Exception(3011)},0)});var o=new SWAC.WorkerHub(t,n,i,!1);u(t,o),"function"==typeof SWAC.Hub.instance._internal.original&&(o.fullname=e,n._internal.setInnerComponent(SWAC.Hub.instance._internal.original(o))),o.services=n._internal.services,n._internal.setHub(o),o=null,n.fullname=e,n.beginExpose().then(function(){i.detachBootMessageListener(),t.fulfill(n),n=null},function(e){t.reject(e),n=null})},function(e){i=null},r.version,r.auth,r.attributes,r.extensions):(p=i,t.resolved?(b="pending",l(i,r.timeout,r.success,r.failure,r.version,r.auth,r.attributes,r.extensions)):(n(),t.resolved=!0)),s.push(i)};return t.catch(function(){}),W&&function(){this.addEventListener("connect",function(e){0<o.length?o.push(e):(o.push(e),d(e))},!1)}(),{start:function(n,t,e,o,i){!function(e,n,t,o,i){t=t||"*",i=i||1e3,n=n||function(e){},o=o||"no";var s=arguments[5],a=arguments[6];r.success=e,r.failure=n,r.version=t,r.auth=o,r.attributes=s,r.extensions=a,r.timeout=i,(W||S)&&(window=this),"done"!==b?y?window.setTimeout(function(){n({message:"Boot phase in progress"})},0):(y=!0,c.then(function(){l(p,i,e,n,t,o,s,a)}).catch(function(){})):window.setTimeout(function(){n({message:"Boot phase already done"})},0)}(function(e){void 0!==B.beginInitialize?B.beginInitialize(t,i).then(function(e){n(!0)},function(e){n(!1,e.message)}):n(!1,"beginInitialize method not found")},function(e){n(!1,e.message)},B.version,"no",o||1e4,{control:!0},e||[])},_internal:{containerInfo:E,checkIfWorker:m,SWConList:s,manageConnections:u}}}()).version="1.6.3",B)),"undefined"!=typeof module&&void 0!==module.exports?(module.exports=window.WebCC,module.exports.default=module.exports):"function"==typeof define&&void 0!==define.amd&&"undefined"!=typeof requirejs&&void 0!==requirejs.s.contexts._.config&&void 0!==requirejs.s.contexts._.config.paths["@swac/webcc-boot"]?define(function(){return window.WebCC}):"undefined"!=typeof SystemJS&&SystemJS.map.hasOwnProperty("@swac/webcc-boot")&&define(function(){return window.WebCC})}catch(e){}}();
//# sourceMappingURL=webcc.min.map